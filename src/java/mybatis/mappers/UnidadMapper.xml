<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="unidad">
   
    <select id="obtenerUnidad" resultType="pojo.Unidad">
    SELECT u.idUnidad, u.vin, u.marca, u.modelo, u.año as 'año', u.idInterno,u.idTipo,t.descripcionTipo as 'tipoUnidad'
    FROM Unidad u
    INNER JOIN TipoUnidad t ON t.idTipo = u.idTipo; 
    </select> 
    <select id="obtenerUnidadVIN" resultType="pojo.Unidad">
    SELECT u.idUnidad, u.vin, u.marca, u.modelo, u.año, u.idInterno,u.idTipo
    FROM Unidad u
    INNER JOIN TipoUnidad t ON T.idTipo = u.idTipo
    WHERE u.vin = #{vin};
    </select>
    
    <select id="obtenerUnidadMarca" resultType="pojo.Unidad">
    SELECT u.idUnidad, u.vin, u.marca, u.modelo, u.año, u.idInterno,u.idTipo
    FROM Unidad u
    INNER JOIN TipoUnidad t ON T.idTipo = u.idTipo
    WHERE u.marca = #{marca};
    </select>
    
    <select id="obtenerUnidadIdInterno" resultType="pojo.Unidad">
    SELECT u.idUnidad, u.vin, u.marca, u.modelo, u.año, u.idInterno,u.idTipo
    FROM Unidad u
    INNER JOIN TipoUnidad t ON T.idTipo = u.idTipo
    WHERE u.idInterno = #{idInterno};
    </select>
    
     <insert id="registrarUnidad" parameterType="pojo.Unidad" >
     INSERT INTO Unidad (vin, marca, modelo, año, idInterno, idTipo)
     VALUES (#{vin}, #{marca}, #{modelo}, #{año}, #{idInterno}, #{idTipo});
    </insert>
    
    <update id="editarUnidad" parameterType="pojo.Unidad">
    UPDATE Unidad
    SET   marca = #{marca}, modelo = #{modelo},año = #{año},idInterno = #{idInterno},idTipo = #{idTipo}
    WHERE idUnidad = #{idUnidad};
    </update>

    <delete id="eliminarUnidadId" parameterType="pojo.Unidad">
        DELETE
        FROM Unidad
        WHERE idUnidad = #{idUnidad}
    </delete>
    
 
</mapper>